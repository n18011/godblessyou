# 開発ルール

## 1. ブランチ戦略

### ブランチ命名規則
- フィーチャーブランチ: `feature/{phase番号}-{機能名}`
  - 例: `feature/phase1-k8s-infra`
- バグ修正ブランチ: `fix/{issue番号}-{修正内容}`
  - 例: `fix/123-nginx-config`
- リリースブランチ: `release/v{メジャー}.{マイナー}.{パッチ}`
  - 例: `release/v1.0.0`

### ブランチワークフロー
1. 新機能開発時は`main`ブランチから新しいフィーチャーブランチを作成
2. 作業完了後、プルリクエストを作成
3. レビュー後、`main`ブランチにマージ

## 2. コミットメッセージ規則

### コミットメッセージの形式
```
{type}: {概要}

- 詳細な変更点1
- 詳細な変更点2
```

### コミットタイプ
- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメントのみの変更
- `style`: コードの意味に影響を与えない変更（空白、フォーマット等）
- `refactor`: リファクタリング
- `test`: テストコードの追加・修正
- `chore`: ビルドプロセスやツールの変更

## 3. プルリクエスト規則

### プルリクエストの形式
```
## 概要
{変更の目的と概要を記載}

## 変更内容
- 変更点1
- 変更点2

## 動作確認
- 確認項目1
- 確認項目2

## 関連Issue
Closes #{issue番号}

## 次のステップ
1. 次のタスク1
2. 次のタスク2
```

## 4. Kubernetes関連の規則

### マニフェストファイルの配置
```
k8s/
├── clusters/              # クラスター固有の設定
│   └── kind-config.yaml   # Kindクラスター設定
├── base/                  # 共通のベース設定
│   ├── namespaces/       # 名前空間定義
│   ├── storage/          # ストレージ関連
│   └── networking/       # ネットワーク関連
└── overlays/             # 環境固有のオーバーレイ設定
    ├── development/      # 開発環境
    └── production/       # 本番環境
```

### リソース命名規則
- 小文字とハイフンを使用
- プレフィックスに機能名やコンポーネント名を付与
- 例: `nginx-ingress-controller`, `mysql-persistent-volume`

### ラベル付与規則
必須ラベル：
- `app.kubernetes.io/name`: アプリケーション名
- `app.kubernetes.io/component`: コンポーネントの種類
- `app.kubernetes.io/part-of`: 所属するシステム名
- `app.kubernetes.io/managed-by`: 管理ツール名

## 5. ドキュメント規則

### ドキュメントの配置
```
docs/
├── rules/              # 各種ルール
├── architecture/       # アーキテクチャ設計
├── operations/        # 運用手順
└── development/       # 開発ガイド
```

### READMEの必須項目
- プロジェクト概要
- 前提条件
- セットアップ手順
- 開発フロー
- 貢献ガイド
- ライセンス

## 6. レビュー規則

### レビュー観点
1. 機能要件
   - 仕様通りに実装されているか
   - エッジケースが考慮されているか

2. 非機能要件
   - パフォーマンスへの影響
   - セキュリティ上の問題
   - 運用性への影響

3. コード品質
   - 命名の適切さ
   - コードの重複
   - エラーハンドリング
   - テストの網羅性

### レビューコメント規則
- 建設的なフィードバックを心がける
- 具体的な改善案を提示する
- 必須の修正は「Must」、推奨の修正は「Should」と明記 